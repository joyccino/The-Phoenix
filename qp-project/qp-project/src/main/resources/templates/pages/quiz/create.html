<!DOCTYPE html>
<html data-bs-theme="light" dir="ltr"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>Falcon | Dashboard &amp; Web App Template</title>


    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link rel="apple-touch-icon" sizes="180x180" href="../../../assets/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../assets/img/favicons/favicon-16x16.png">
    <link rel="shortcut icon" type="image/x-icon" href="../../../assets/img/favicons/favicon.ico">
    <link rel="manifest" href="../../../assets/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="../../../assets/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">
    <script src="../../../assets/js/config.js"></script>
    <script src="../../../vendors/simplebar/simplebar.min.js"></script>


    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link href="../../../vendors/choices/choices.min.css" rel="stylesheet">
    <link href="../../../vendors/dropzone/dropzone.min.css" rel="stylesheet">
    <link href="../../../vendors/flatpickr/flatpickr.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700%7cPoppins:300,400,500,600,700,800,900&amp;display=swap" rel="stylesheet">
    <link href="../../../vendors/simplebar/simplebar.min.css" rel="stylesheet">
    <link href="../../../assets/css/theme-rtl.css" rel="stylesheet" id="style-rtl">
    <link href="../../../assets/css/theme.css" rel="stylesheet" id="style-default">
    <link href="../../../assets/css/user-rtl.css" rel="stylesheet" id="user-style-rtl">
    <link href="../../../assets/css/user.css" rel="stylesheet" id="user-style-default">

    <link href="../../../vendors/prism/prism-okaidia.css" rel="stylesheet">
    <script>
      var isRTL = JSON.parse(localStorage.getItem('isRTL'));
      if (isRTL) {
        var linkDefault = document.getElementById('style-default');
        var userLinkDefault = document.getElementById('user-style-default');
        linkDefault.setAttribute('disabled', true);
        userLinkDefault.setAttribute('disabled', true);
        document.querySelector('html').setAttribute('dir', 'rtl');
      } else {
        var linkRTL = document.getElementById('style-rtl');
        var userLinkRTL = document.getElementById('user-style-rtl');
        linkRTL.setAttribute('disabled', true);
        userLinkRTL.setAttribute('disabled', true);
      }
    </script>
      
    

  </head>


  <body>

    <!-- ===============================================-->
    <!--    Main Content-->
    <!-- ===============================================-->
    <main class="main" id="top">
      <div class="container" data-layout="container">
        <script>
          var isFluid = JSON.parse(localStorage.getItem('isFluid'));
          if (isFluid) {
            var container = document.querySelector('[data-layout]');
            container.classList.remove('container');
            container.classList.add('container-fluid');
          }
        </script>
        <nav class="navbar navbar-light navbar-vertical navbar-expand-xl">
          <script>
            var navbarStyle = localStorage.getItem("navbarStyle");
            if (navbarStyle && navbarStyle !== 'transparent') {
              document.querySelector('.navbar-vertical').classList.add(`navbar-${navbarStyle}`);
            }
          </script>
          <div class="d-flex align-items-center">
<!--            <div class="toggle-icon-wrapper">-->

<!--              <button class="btn navbar-toggler-humburger-icon navbar-vertical-toggle" data-bs-toggle="tooltip" data-bs-placement="left" title="Toggle Navigation"><span class="navbar-toggle-icon"><span class="toggle-line"></span></span></button>-->

<!--            </div>-->
              <a class="navbar-brand" href="../quiz/home">
                  <div class="d-flex align-items-center py-3"><img class="me-2" src="../../assets/img/icons/qp-transparent.png" alt="" width="55" /><span class="font-sans-serif">project</span>
                  </div>
              </a>
          </div>
        </nav>
        <div class="content">
          <nav class="navbar navbar-light navbar-glass navbar-top navbar-expand">

            <button class="btn navbar-toggler-humburger-icon navbar-toggler me-1 me-sm-3" type="button" data-bs-toggle="collapse" data-bs-target="#navbarVerticalCollapse" aria-controls="navbarVerticalCollapse" aria-expanded="false" aria-label="Toggle Navigation"><span class="navbar-toggle-icon"><span class="toggle-line"></span></span></button>
            <a class="navbar-brand me-1 me-sm-3" href="../../../index.html">
              <div class="d-flex align-items-center"><img class="me-2" src="../../../assets/img/icons/spot-illustrations/falcon.png" alt="" width="40" /><span class="font-sans-serif">falcon</span>
              </div>
            </a>
           
            <ul class="navbar-nav navbar-nav-icons ms-auto flex-row align-items-center">
                <li class="nav-item dropdown">
                    <a class="nav-link pe-0 ps-2" id="navbarDropdownUser" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <div class="avatar avatar-xl">
                            <img class="rounded-circle" src="../../../assets/img/icons/cookie.png" alt="" />
                        </div>
                    </a>
                    <div class="dropdown-menu dropdown-caret dropdown-menu-end py-0" aria-labelledby="navbarDropdownUser">
                        <div class="bg-white dark__bg-1000 rounded-2 py-2">
                            <!--                            <a class="dropdown-item fw-bold text-warning" href="#!"><span class="fas fa-crown me-1"></span><span>Go Pro</span></a>-->
                            <!--                            -->
                            <!--                            <div class="dropdown-divider"></div>-->
                            <!--                            <a class="dropdown-item" href="#!">Set status</a>-->
                            <!--                            <a class="dropdown-item" href="../../../pages/user/profile.html">Profile &amp; account</a>-->
                            <!--                            <a class="dropdown-item" href="#!">Feedback</a>-->
                            <!--                            -->
                            <!--                            <div class="dropdown-divider"></div>-->
                            <a class="dropdown-item" href="../auth/memberList">회원 관리</a>
                            <a class="dropdown-item" href="../auth/analytics">애널리틱스</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="../mypage/edit">마이페이지</a>
                            <a class="dropdown-item" href="../auth/logout">로그아웃</a>
                        </div>
                    </div>
                </li>
            </ul>
          </nav>
            <div class="row">
                <div class="col-xxl-10 col-xl-9">
              <div class="card mb-3">
                <div class="bg-holder d-none d-lg-block bg-card" style="background-image:url(../../../assets/img/icons/spot-illustrations/corner-4.png);">
                </div>
                <!--/.bg-holder-->

                <div class="card-body pt-0 pt-md-3">
                  <h3 id="headerTitle" th:text="${title}">새로운 퀴즈 생성</h3>
                  <p class="mb-0" th:text="${sub}">퀴즈 정보를 작성한 뒤 '퀴즈 생성하기' 버튼을 클릭해주세요.</p>
                </div>
              </div>
              <ul class="nav nav-tabs" id="myTab" role="tablist">
                  <li class="nav-item"><a class="nav-link" id="settingTab" data-bs-toggle="tab" href="#tabSetting" role="tab" aria-controls="tabSetting">퀴즈 정보</a></li>
                  <li class="nav-item" id="questionGenTab" style="display:none;"><a class="nav-link" id="formTab" data-bs-toggle="tab" href="#tabForm" role="tab" aria-controls="tabForm">질문 만들기</a></li>
              </ul>
              <!-- 퀴즈설정 -->
              <div class ="tab-content border-x border-bottom p-3" id="myTabContent">
                  <div class="tab-pane fade" id="tabSetting" role="tabpanel" aria-labelledby="settingTab">
                      <form autocomplete="off" th:action="@{/quiz/generateQuiz}" method="post">
                          <div class="card mb-3">
                            <div class="card-header">
                              <h5 class="mb-0"><b>퀴즈 정보</b></h5>
                            </div>
                            <div class="card-body bg-light">
                              <div class="row gx-2">
                                <div class="col-12 mb-3">
                                  <label class="form-label" for="quiz-title"><b>제목</b><span class="text-danger">*</span><a class="d-inline-block" href="#" data-bs-toggle="tooltip" data-bs-placement="top" aria-label="title-tip" data-bs-original-title="예시: 중등영어 3학년 능률(김) 내신대비 1과 본문"><span class="fa fa-question-circle ms-2"></span></a>
                                  </label>
                                  <input class="form-control" id="quiz-title" name="quizzesTitle" type="text" th:value="${quiz?.quizzesTitle}" required/>
                                </div>
                                <div class="col-sm-6 mb-3">
                                  <label class="form-label" for="edu-category"><b>교육 과정</b><span class="text-danger">*</span></label>
                                  <select class="form-select js-choice" id="edu-category" name="educationLevel" data-options='{"removeItemButton":false,"placeholder":false, "shouldSort":false}' required>
                                      <option disabled selected value="">교육과정 선택</option>
                                      <option value="elementary">초등학교</option>
                                    <option value="middle">중학교</option>
                                    <option value="high">고등학교</option>
                                    <option value="university">대학교</option>
                                  </select>
                                </div>
                                <div class="col-sm-6 mb-3" id="years">
                                  <label class="form-label" for="year-category"><b>학년</b><span class="text-danger">*</span></label>
                                  <select class="form-select js-choice" id="year-category" data-options='{"removeItemButton":false,"placeholder":false, "shouldSort":true}' required >
                                      <option disabled selected value="">학년 선택</option>
                                      <option value="1">1학년</option>
                                    <option value="2">2학년</option>
                                    <option value="3">3학년</option>
                                    <option value="4">4학년</option>
                                    <option value="5">5학년</option>
                                    <option value="6">6학년</option>
                                  </select>
                                </div>
                                <div class="col-sm-6 mb-3">
                                    <label class="form-label" for="general-subject" id="generalSubjectLabel"><b>과목</b><span class="text-danger">*</span></label>
                                    <select class="form-select js-choice" id="general-subject" size="1" data-options='{"removeItemButton":false,"placeholder":true}'>
                                        <option disabled selected value="">과목 선택</option>
                                        <option th:each="l : ${generalSubjectList}"><p th:text="${l.subjectGeneralSubject}"></p></option>
                                    </select>
                                </select>
                                </div>
                                <div class="col-sm-6 mb-3">
                                    <label class="form-label" for="detail-subject" id="detailSubjectLabel"><b>세부 과목</b><span class="text-danger">*</span></label>
                                    <select class="form-select js-choice" id="detail-subject" size="1" data-options='{"removeItemButton":true,"placeholder":true}'>
                                        <option selecteㅇd value="">세부 과목 선택</option>
                                        <!--<option th:each="l : ${detailSubjectList}"><p th:text="${l.subjectDetailSubject}"></p></option>-->
                                    </select>
                                </div>
                                <div class="col-12 mb-3">
                                    <label class="form-label" for="course-tags" ><b>태그</b><a class="d-inline-block" href="#" data-bs-toggle="tooltip" data-bs-placement="top" aria-label="tag-tip" data-bs-original-title="과목에 대한 태그를 입력해주세요. 태그로도 검색이 가능합니다."><span class="fa fa-question-circle ms-2"></span></a>
                                    </label>
                                    <input class="form-control js-choice" id="course-tags" type="text" size="1" data-options='{"removeItemButton":true,"placeholder":true}' />
                                </div>
                                <!--<div class="col-sm-6 mb-3">
                                    <label class="form-label" for="expected-time">예상 풀이시간</label>
                                    <div class="input-group"><input class="form-control" id="expected-time" type="number" min="0" aria-describedby="minutes"/><span class="input-group-text" id="minutes">분</span></div>
                                </div>-->
                              </div>
                            </div>
                          </div>
                          <div class="card mb-3">
                              <div class="card-header">
                                  <h5 class="mb-0"><b>퀴즈 세부설정</b></h5>
                              </div>
                            <div class="card-body bg-light">
                                <div class="row gx-2">
                                    <div class="col-sm-6 mb-3">
                                        <label class="form-label" for="shuffle-quiz"><b>문제 순서 랜덤</b><a class="d-inline-block" href="#" data-bs-toggle="tooltip" data-bs-placement="top" aria-label="tag-tip" data-bs-original-title="질문 순서를 랜덤으로 출제하는 옵션입니다."><svg class="svg-inline--fa fa-question-circle fa-w-16 ms-2" aria-hidden="true" focusable="false" data-prefix="fa" data-icon="question-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"></path></svg></a></label>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <div class="form-check form-switch mb-0">
                                            <input class="form-check-input" id="shuffle-quiz" type="checkbox" name="quizzesShuffleQuestions"/>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label class="form-label" for="shuffle-options"><b>문제 선택지 순서 랜덤</b><a class="d-inline-block" href="#" data-bs-toggle="tooltip" data-bs-placement="top" aria-label="tag-tip" data-bs-original-title="질문 선택지의 순서를 랜덤으로 출제하는 옵션입니다."><svg class="svg-inline--fa fa-question-circle fa-w-16 ms-2" aria-hidden="true" focusable="false" data-prefix="fa" data-icon="question-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"></path></svg></a></label>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <div class="form-check form-switch mb-0">
                                            <input class="form-check-input" id="shuffle-options" type="checkbox" name="quizzesShuffleOptions"/>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label class="form-label" for="allowed-attempts"><b>응시 횟수 제한</b><a class="d-inline-block" href="#" data-bs-toggle="tooltip" data-bs-placement="top" aria-label="tag-tip" data-bs-original-title="응시 가능 횟수를 1회로 제한하는 옵션입니다."><svg class="svg-inline--fa fa-question-circle fa-w-16 ms-2" aria-hidden="true" focusable="false" data-prefix="fa" data-icon="question-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"></path></svg></a></label>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <div class="form-check form-switch mb-0">
                                            <input class="form-check-input" id="allowed-attempts" type="checkbox" name="quizzesAllowedAttempts"/>
                                        </div>
                                    </div>
                                </div>
                                  <div class="mb-3">
                                      <a class="btn btn-primary d-block w-100 mt-3" id="post-quiz" onclick="addQuizBtn();" disabled> <b>퀴즈 생성하기</b> </a>
                                  </div>
                            </div>
                          </div>
                      </form>
                  </div>
                  <!--퀴즈설정 끝-->

                  <!--문제생성-->
                  <div class="tab-pane fade" id="tabForm" role="tabpanel" aria-labelledby="formTab">
                      <form>
                          <div class="card mb-3">
                              <div class="card-header">
                                  <h5 class="mb-0"><b>질문</b></h5>
                              </div>
                              <div class="card-body bg-light">
                                  <div class="row gx-2">
                                      <div class="col-12 mb-3">
                                          <label class="form-label">
                                              <b>아이디 (이미 추가된 질문 수정시 사용할것. 기능 구현 후 히든처리 바람)</b>
                                          </label>
                                          <input class="form-control" id = "" type="text" readonly/>
                                      </div>
                                      <div class="col-12 mb-3">
                                          <label class="form-label">
                                              <b>질문</b><span class="text-danger">*</span>
                                          </label>
                                          <textarea class="form-control" id="question-content" rows="3" style="white-space: pre-line"></textarea>
                                      </div>
                                      <div class="col-12 mb-3">
                                          <label class="form-label" >
                                              <b>퀴즈 유형</b><span class="text-danger">*</span>
                                          </label>
                                          <select class="form-select" id="quiz-type" required>
                                              <option value = "객관식" disabled>객관식(정답 하나) 문제</option>
                                              <option value = "선다형" disabled>선다형(정답 여러개) 문제</option>
                                              <option value = "단답형" selected>단답형 문제</option>
                                          </select>
                                      </div>
                                      
                                      <div class="col-12 mb-3">
                                          <label class="form-label" for="course-tags" ><b>답안</b><span class="text-danger">*</span></a>
                                          </label>
                                          <input class="form-control" type="text" id="question-opt" required/>
                                          <!-- multiple options 준비
                                          <div class="input-group mb-3">
                                              <div class="input-group-text"><input class="form-check-input" type="checkbox" value="" aria-label="Checkbox for following text input" /></div><input class="form-control" type="text" aria-label="Text input with checkbox" />
                                          </div>
                                          <div class="input-group">
                                              <div class="input-group-text"><input class="form-check-input" type="radio" value="" aria-label="Radio button for following text input" /></div><input class="form-control" type="text" aria-label="Text input with radio button" />
                                          </div> -->
                                      </div>
                                      
                                      
                                      <div class="mb-3">
                                          <a id = "addQBtn" class="btn btn-secondary d-block w-100 mt-3" disabled onclick="addQuestion();"> <b>질문 추가하기</b> </a>
                                          <a id = "editQBtn" class="btn btn-secondary d-block w-100 mt-3" disabled onclick="editQuestion();"> <b>질문 수정완료</b> </a>
                                      </div>
                                      
                                  </div>
                              </div>
                          </div>
                          <div class="card mb-3">
                              <div class="card-header">
                                  <h5 class="mb-0"><b>질문 목록</b></h5>
                              </div>
                              <div class="card-body bg-light">
                                  <div class="row gx-2">
                                      <div class="table-responsive scrollbar">
                                          <table class="table" id="table-questions" >
                                              <thead>
                                              <tr class="btn-reveal-trigger">
                                                  <th scope="col" style="display:none">id-히든처리 예정</th>
                                                  <th scope="col">순서</th>
                                                  <th scope="col">질문</th>
                                                  <th scope="col">퀴즈 유형</th>
                                                  <th scope="col">정답</th>
                                                  <th class="text-end" scope="col">수정</th>
                                              </tr>
                                              </thead>
                                              <tbody id="tbody">
                                              <tr>
                                                  <td>0</td> <!-- 수정 및 삭제시 이 컬럼으로 조회할 것 -->
                                                  <td>서울은 어느 나라의 수도인가? (예시)</td>
                                                  <td>단답형</td>
                                                  <td>A</td>
                                                  <td class="text-end">
                                                      <div><button class="btn btn-link p-0" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="질문 수정"><span class="text-500 fas fa-edit"></span></button><button class="btn btn-link p-0 ms-2" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="질문 삭제"><span class="text-500 fas fa-trash-alt"></span></button></div>
                                                  </td>
                                              </tr>
                                              </tbody>
                                          </table>
                                      </div>
                                      <div class="mb-3">
                                          <a class="btn btn-primary d-block w-100 mt-3" disabled> <b>퀴즈 등록하기</b> </a>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </form>
                  </div>
              </div>
            </div>
          </div>
          
        </div>
        <div class="modal fade" id="authentication-modal" tabindex="-1" role="dialog" aria-labelledby="authentication-modal-label" aria-hidden="true">
          <div class="modal-dialog mt-6" role="document">
            <div class="modal-content border-0">
              <div class="modal-header px-5 position-relative modal-shape-header bg-shape">
                <div class="position-relative z-1" data-bs-theme="light">
                  <h4 class="mb-0 text-white" id="authentication-modal-label">Register</h4>
                  <p class="fs--1 mb-0 text-white">Please create your free Falcon account</p>
                </div>
                <button class="btn-close btn-close-white position-absolute top-0 end-0 mt-2 me-2" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body py-4 px-5">
                <form>
                  <div class="mb-3">
                    <label class="form-label" for="modal-auth-name">Name</label>
                    <input class="form-control" type="text" autocomplete="on" id="modal-auth-name" />
                  </div>
                  <div class="mb-3">
                    <label class="form-label" for="modal-auth-email">Email address</label>
                    <input class="form-control" type="email" autocomplete="on" id="modal-auth-email" />
                  </div>
                  <div class="row gx-2">
                    <div class="mb-3 col-sm-6">
                      <label class="form-label" for="modal-auth-password">Password</label>
                      <input class="form-control" type="password" autocomplete="on" id="modal-auth-password" />
                    </div>
                    <div class="mb-3 col-sm-6">
                      <label class="form-label" for="modal-auth-confirm-password">Confirm Password</label>
                      <input class="form-control" type="password" autocomplete="on" id="modal-auth-confirm-password" />
                    </div>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="modal-auth-register-checkbox" />
                    <label class="form-label" for="modal-auth-register-checkbox">I accept the <a href="#!">terms </a>and <a href="#!">privacy policy</a></label>
                  </div>
                  <div class="mb-3">
                    <button class="btn btn-primary d-block w-100 mt-3" type="submit" name="submit">Register</button>
                  </div>
                </form>
                <div class="position-relative mt-5">
                  <hr />
                  <div class="divider-content-center">or register with</div>
                </div>
                <div class="row g-2 mt-2">
                  <div class="col-sm-6"><a class="btn btn-outline-google-plus btn-sm d-block w-100" href="#"><span class="fab fa-google-plus-g me-2" data-fa-transform="grow-8"></span> google</a></div>
                  <div class="col-sm-6"><a class="btn btn-outline-facebook btn-sm d-block w-100" href="#"><span class="fab fa-facebook-square me-2" data-fa-transform="grow-8"></span> facebook</a></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal fade" id="schedule-discount-modal" tabindex="-1" role="dialog" aria-labelledby="schedule-discount-modal-label" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header d-flex align-items-center border-bottom px-4">
                <h4 class="mb-0" id="schedule-discount-modal-label">Schedule for Discount </h4>
              </div>

              <div class="modal-footer border-top text-start py-2 px-4 d-flex justify-content-end">
                <button class="btn btn-outline-secondary btn-md" data-bs-dismiss="modal"> <span class="fas fa-times me-1 fs--1"></span>Cancel</button>
                <button class="btn btn-primary btn-md ms-2" type="submit"> <span class="fas fa-check me-1 fs--1"></span>Confirm</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <!-- ===============================================-->
    <!--    End of Main Content-->
    <!-- ===============================================-->

    <!-- ===============================================-->
    <!--    JavaScripts-->
    <!-- ===============================================-->
    <script src="../../../vendors/popper/popper.min.js"></script>
    <script src="../../../vendors/bootstrap/bootstrap.min.js"></script>
    <script src="../../../vendors/anchorjs/anchor.min.js"></script>
    <script src="../../../vendors/is/is.min.js"></script>
    <script src="../../../vendors/tinymce/tinymce.min.js"></script>
    <script src="../../../vendors/choices/choices.min.js"></script>
    <script src="../../../assets/js/flatpickr.js"></script>
    <script src="../../../vendors/dropzone/dropzone.min.js"></script>
    <script src="../../../vendors/fontawesome/all.min.js"></script>
    <script src="../../../vendors/lodash/lodash.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
    <script src="../../../vendors/list.js/list.min.js"></script>
    <script src="../../../assets/js/theme.js"></script>
    <script src="../../../vendors/prism/prism.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../../../vendors/jquery/jquery.min.js"></script>
    <script src="../../../vendors/select2/select2.min.js"></script>
    <script src="../../../vendors/select2/select2.full.min.js"></script>
    <script>
    $("#settingTab").addClass("active");
    $("#settingTab").addClass("show");
    $("#tabSetting").addClass("active");
    $("#tabSetting").addClass("show");
    $("#settingTab").prop('aria-selected', true);

    $("#formTab").removeClass("active");
    $("#formTab").removeClass("show");
    $("#tabForm").removeClass("active");
    $("#tabForm").removeClass("show");
    $("#formTab").prop('aria-selected', false);
    
    function addQuestion(){
        //ajax 로 post
        
        let question = document.getElementById("question-content").value;
<!--        question = question.replace(/\n\r?/g, '<br />');-->
          
          $.ajax({
            type : "POST", // http 방식
            url : "/quiz/addQuestion", // ajax 통신 url
            data : { // ajax 내용 => 파라미터 : 값 이라고 생각해도 무방
                "question" : question,
                "option" : document.getElementById("question-opt").value,
                "questionType" : document.getElementById("quiz-type").value
            },
            success : function(data) {
                const table = document.getElementById("table-questions");
                console.log(data);
                $("#table-questions").find("tr:gt(0)").remove();
                let idx = 1;
                $.each(data, function(index, value) {
                    let id = value.questionsId;
                    let question = value.questionsQuestion;
                    let questionType = value.questionQuestionType;
                    let questionAnswer = value.questionAnswer;
                    let markup =
                        `<tr>
                          <td class="qId">`+id+`</td> <!-- 수정 및 삭제시 이 컬럼으로 조회할 것 -->
                          <td>`+question+`</td>
                          <td>`+questionType+`</td>
                          <td>`+questionAnswer+`</td>
                          <td class="text-end">
                              <div><button class="btn btn-link value = '${question}' p-0" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="질문 수정" onclick="modifyRow(this, '${questionType}')"><span class="text-500 fas fa-edit"></span></button><button class="btn btn-link p-0 ms-2" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="질문 삭제" onclick="deleteRow(this)"><span class="text-500 fas fa-trash-alt"></span></button></div>
                          </td>
                      </tr>`;
                    $("#table-questions tr:last").after(markup);
                    
                    console.log(idx+":"+data.length);
                    
                    if(idx == data.length) {
<!--                        console.log("last2");-->
<!--                        $("table-questions tr:last").fadeIn(3000);-->
<!--                        $("table-questions tr:last").fadeIn(3000);-->
                    }
                    idx += 1;
                });
                // 질문 목록에 작성한거 지워주기
                $('#question-content').val("");
                $('#question-opt').val("");
            }
          })
        }

      const postBtn = document.getElementById("post-quiz");
      const quizTitle = document.getElementById("quiz-title");
      const eduCate = document.getElementById("edu-category");
      const yearCate = document.getElementById("year-category");
      
      let element = document.querySelector("#edu-category");
      const choices = new window.Choices(yearCate);
      
      element.addEventListener('change', e => {
        console.log(e.detail);
        if(e.detail.value == "elementary") {
            $("#years").attr("style", "display: block!important");
            choices.clearChoices();
            choices.setChoices([
              { value: '', label: '학년 선택', selected: true, disabled: true },
              { value: '1', label: '1학년'},
              { value: '2', label: '2학년' },
              { value: '3', label: '3학년' },
              { value: '4', label: '4학년' },
              { value: '5', label: '5학년' },
              { value: '6', label: '6학년' },
            ]);
        }else if (e.detail.value == "middle"){
            $("#years").attr("style", "display: block!important");
            choices.clearChoices();
            choices.setChoices([
              { value: '', label: '학년 선택', selected: true, disabled: true },
              { value: '1', label: '1학년'},
              { value: '2', label: '2학년' },
              { value: '3', label: '3학년' },
            ]);
        }else if  (e.detail.value == "high"){
            $("#years").attr("style", "display: block!important");
            choices.clearChoices();
            choices.setChoices([
              { value: '', label: '학년 선택', selected: true, disabled: true },
              { value: '1', label: '1학년'},
              { value: '2', label: '2학년' },
              { value: '3', label: '3학년' },
            ]);
        }else if (e.detail.value == "university"){
            $("#years").attr("style", "display: none!important");
       }
      });

      

      function addQuizBtn(){
          //ajax 로 post
          $.ajax({
            type : "POST", // http 방식
            url : "/quiz/generateQuiz", // ajax 통신 url
            data : { // ajax 내용 => 파라미터 : 값 이라고 생각해도 무방
                "quizzesTitle" : quizTitle.value,
                "quizzesShuffleQuestions" : document.querySelector("#shuffle-quiz").checked,
                "quizzesShuffleOptions" : document.querySelector("#shuffle-options").checked,
                "quizzesAllowedAttempts" : document.querySelector("#allowed-attempts").checked,
            },
            success : function(data) {
                $("#tabSetting > form > div:nth-child(2) > div.card-body.bg-light > div.mb-3 > a").attr("style", "display: none!important");
                $("#questionGenTab").attr("style", "display: block!important");
                
                $("#settingTab").removeClass("active");
                $("#settingTab").removeClass("show");
                $("#settingTab").prop('aria-selected', false);
                $("#tabSetting").removeClass("active");
                $("#tabSetting").removeClass("show");

                $("#formTab").addClass("active");
                $("#formTab").addClass("show");
                $("#formTab").prop('aria-selected', true);
                $("#tabForm").addClass("active");
                $("#tabForm").addClass("show");
                
                $("#top > div > div.content > div > div > div.card.mb-3 > div.card-body.z-1 > p").html("'질문 만들기' 탭에서 질문을 추가한 뒤 '퀴즈 등록하기' 버튼을 클릭해주세요.");

            }
          })
      }

        $(document).ready(function() {
            // general subject 선택 시 detail subject 목록 조회
            $('#general-subject').on('change', function() {
                var selectedGeneralSubject = $(this).val();
                $('#detail-subject').empty();
                if (selectedGeneralSubject != "") {
                    $.ajax({
                        type : "POST",
                        url : "/quiz/getDetailSubjects",
                        data : { "selectedGeneralSubject" : selectedGeneralSubject },
                        success : function(data) {
<!--                            let html = '';-->
<!--                            let parent = document.querySelector('#tabSetting > div:nth-child(1) > div.card-body.bg-light > form:nth-child(2) > div:nth-child(2) > div > div.choices__list.choices__list&#45;&#45;dropdown > div');-->
<!--                             $.each(data, function(index, value) {-->
<!--                                //$("#detail-subject").append('<option value="' + value.subjectId + '">' + value.subjectDetailSubject + '</option>');-->
<!--                                /*document.evaluate('/html/body/main/div/div[1]/div[1]/div/div[2]/div[1]/div[1]/div[2]/form[2]/div[2]/div/div[2]/div', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).append(-->
<!--                                '<div id="choices&#45;&#45;detail-subject-item-choice-2" class="choices__item choices__item&#45;&#45;choice is-selected choices__placeholder choices__item&#45;&#45;disabled" role="option" data-choice="" data-id="2" data-value="" data-select-text="" data-choice-disabled="" aria-disabled="true">세부 과목 선택</div>'-->
<!--                                );*/-->
<!--                                /*-->
<!--                                    `<div id="choices&#45;&#45;detail-subject-item-choice-${index}" class="choices__item choices__item&#45;&#45;choice is-selected choices__placeholder choices__item&#45;&#45;disabled" role="option" data-choice="" data-id="${index}" data-value="${value.subjectId}" data-select-text="" data-choice-disabled="" aria-disabled="true">-->
<!--                                        간호-->
<!--                                    </div>`-->
<!--                                */-->
<!--                                /*let parent = document.querySelector('#tabSetting > div:nth-child(1) > div.card-body.bg-light > form:nth-child(2) > div:nth-child(2) > div > div.choices__list.choices__list&#45;&#45;dropdown > div');-->
<!--                                let childTemplate = document.querySelector('#choices&#45;&#45;detail-subject-item-choice-1');-->
<!--                                childTemplate.innerHTML = value.subjectDetailSubject;-->
<!--                                parent.appendChild(childTemplate);*/-->
<!--                                let childTemplate = document.createElement('div');-->
<!--                                /*childTemplate.setAttribute('id',"choices&#45;&#45;detail-subject-item-choice-${index+1}")-->
<!--                                             .setAttribute('class', "choices__item choices__item&#45;&#45;choice is-selected choices__placeholder choices__item&#45;&#45;disabled");-->
<!--                                             .setAttribute('role',"option");-->
<!--                                             .setAttribute('data-choice',"");-->
<!--                                             .setAttribute('data-value',"${value.subjectId}");-->
<!--                                             .setAttribute('data-select-text',"");-->
<!--                                             .setAttribute('data-choice-disabled',"");-->
<!--                                             .setAttribute('aria-disabled',"true");*/-->

<!--                                html += `-->
<!--                                    <div id="choices&#45;&#45;detail-subject-item-choice-${index+1}" class="choices__item choices__item&#45;&#45;choice is-selected choices__placeholder choices__item&#45;&#45;selectable is-highlighted" role="option" data-choice="" data-id="${index+1}" data-value="${value.subjectId}" data-select-text="" data-choice-selectable="" aria-selected="true">-->
<!--                                      ${value.subjectDetailSubject}-->
<!--                                    </div>-->
<!--                                `;-->
<!--                                parent.innerHTML = html;-->
<!--                            });-->
                        }
                    });
                }
            });
        });
        
        let url = window.location.href;
        
        if (url.includes("edit")) {
            console.log("edit mode");
            // 퀴즈 생성하기 버튼 숨기기, 퀴즈 수정 탭 오픈
            
            $("#tabSetting > form > div:nth-child(2) > div.card-body.bg-light > div.mb-3 > a").attr("style", "display: none!important");
            $("#questionGenTab").attr("style", "display: block!important");
            
            $("#settingTab").removeClass("active");
            $("#settingTab").removeClass("show");
            $("#settingTab").prop('aria-selected', true);
            $("#tabSetting").removeClass("active");
            $("#tabSetting").removeClass("show");

            $("#formTab").addClass("active");
            $("#formTab").addClass("show");
            $("#formTab").prop('aria-selected', false);
            $("#tabForm").addClass("active");
            $("#tabForm").addClass("show");
            
            $("#top > div > div.content > div > div > div.card.mb-3 > div.card-body.z-1 > p").html("'질문 만들기' 탭에서 질문을 추가한 뒤 '퀴즈 등록하기' 버튼을 클릭해주세요.");
            
            $.ajax({
                type : "POST", // http 방식
                url : "/quiz/loadQuestions", // ajax 통신 url
                data : {},
                success : function(data) {
                    const table = document.getElementById("table-questions");
                    console.log(data);
                    $("#table-questions").find("tr:gt(0)").remove();
                    let idx = 1;
                    $.each(data, function(index, value) {
                        let id = value.questionsId;
                        let rid = "r"+id;
                        let mid = "m"+id;
                        let tid = "t"+id;
                        let question = value.questionsQuestion;
                        let questionType = value.questionQuestionType;
                        let questionAnswer = value.questionAnswer;
                        let data = {"question" : question, "questionType" : questionType};
                        index ++;
                        let markup =
                            `<tr>
                              <td class="qidColumn" style="display:none">`+id+`</td> <!-- 수정 및 삭제시 이 컬럼으로 조회할 것 -->
                              <td>`+index+`</td>
                              <td id="${tid}">`+question+`</td>
                              <td>`+questionType+`</td>
                              <td>`+questionAnswer+`</td>
                              <td class="text-end">
                                  <div><button id="${mid}" value = '${question}' class="btn btn-link p-0" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="질문 수정" onclick="modifyRow(this,'${questionType}')"><span class="text-500 fas fa-edit"></span></button><button id="${rid}" class="btn btn-link p-0 ms-2" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="질문 삭제" onclick="deleteRow(this)"><span class="text-500 fas fa-trash-alt"></span></button></div>
                              </td>
                          </tr>`;
                        $("#table-questions tr:last").after(markup);
                        
                        console.log(idx+":"+data.length);
                       
                        idx += 1;
                    });
                    // 질문 목록에 작성한거 지워주기
                    $('#question-content').val("");
                    $('#question-opt').val("");
                }
            });
            console.log("setting done");
        }
        else {
            console.log("create mode");
        }
        
        function deleteRow(e){
            let eid = e.id;
            eid = eid.substring(1);
            let link = "/quiz/questionDelete/"+eid;
            alert(link);
            
            $.ajax({
            type : "POST", // http 방식
            url : link, // ajax 통신 url
            data : {},
            success : function(data) {
                $.ajax({
            type : "POST", // http 방식
            url : "/quiz/loadQuestions", // ajax 통신 url
            data : {},
            success : function(data) {
                const table = document.getElementById("table-questions");
                console.log(data);
                $("#table-questions").find("tr:gt(0)").remove();
                let idx = 1;
                $.each(data, function(index, value) {
                    let id = value.questionsId;
                        let rid = "r"+id;
                        let mid = "m"+id;
                        let tid = "t"+id;
                        let question = value.questionsQuestion;
                        let questionType = value.questionQuestionType;
                        let questionAnswer = value.questionAnswer;
                        let data = {"question" : question, "questionType" : questionType};
                        index ++;
                        let markup =
                            `<tr>
                              <td class="qidColumn" style="display:none">`+id+`</td> <!-- 수정 및 삭제시 이 컬럼으로 조회할 것 -->
                              <td>`+index+`</td>
                              <td id="${tid}">`+question+`</td>
                              <td>`+questionType+`</td>
                              <td>`+questionAnswer+`</td>
                              <td class="text-end">
                                  <div><button id="${mid}" value = '${question}' class="btn btn-link p-0" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="질문 수정" onclick="modifyRow(this, '${questionType}')"><span class="text-500 fas fa-edit"></span></button><button id="${rid}" class="btn btn-link p-0 ms-2" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="질문 삭제" onclick="deleteRow(this)"><span class="text-500 fas fa-trash-alt"></span></button></div>
                              </td>
                          </tr>`;
                    $("#table-questions tr:last").after(markup);
                    console.log(idx+":"+data.length);
                    idx += 1;
                });
            }
          });
            }
          });
        }
        
        function modifyRow(e, questionType){
            let eid = e.id;
            eid = eid.substring(1);
            let eQuestion = e.value;
            let eType = questionType;
            
            let answer = "";
            
            // 답안 가져오기
            $.ajax({
            type : "POST", // http 방식
            url : "/quiz/getOptionByQuestionId", // ajax 통신 url
            data : {"questionId" : eid},
            success : function(data) {
                console.log(data);
                document.querySelector("#question-opt").value = data;
            }
          });
            document.querySelector("#tabForm > form > div:nth-child(1) > div.card-body.bg-light > div > div:nth-child(1) > input").value = eid;
            document.querySelector("#question-content").value = eQuestion;
            document.querySelector("#quiz-type").value = eType;
            
            // 질문 추가하기 숨기고  수정 버튼 열기 (아래 코드로 안되는것 같으니 나중에 수정바람)
            document.querySelector("#addQBtn").style.display = "none !important";
            document.querySelector("#editQBtn").style.display = "block !important";
        };
        
        function editQuestion(){
            // 질문 먼저 업데이트
            let qId = document.querySelector("#tabForm > form > div:nth-child(1) > div.card-body.bg-light > div > div:nth-child(1) > input").value;
            let question = document.querySelector("#question-content").value;
            let qOption = document.querySelector("#question-opt").value;
            $.ajax({
                type : "POST", // http 방식
                url : "/quiz/updateQuestion", // ajax 통신 url
                data : {"questionId" : qId,
                        "question": question,
                        "qOption": qOption},
                success : function(data) {
            
                }
            });
            
            //퀘스쳔 리스트 다시 가져오기
            $.ajax({
                type : "POST", // http 방식
                url : "/quiz/loadQuestions", // ajax 통신 url
                data : {},
                success : function(data) {
                    console.log("successed");
                    const table = document.getElementById("table-questions");
                    console.log(data);
                    $("#table-questions").find("tr:gt(0)").remove();
                    let idx = 1;
                    $.each(data, function(index, value) {
                        let id = value.questionsId;
                        let rid = "r"+id;
                        let mid = "m"+id;
                        let tid = "t"+id;
                        let question = value.questionsQuestion;
                        let questionType = value.questionQuestionType;
                        let questionAnswer = value.questionAnswer;
                        let data = {"question" : question, "questionType" : questionType};
                        index ++;
                        let markup =
                            `<tr>
                              <td class="qidColumn" style="display:none">`+id+`</td> <!-- 수정 및 삭제시 이 컬럼으로 조회할 것 -->
                              <td>`+index+`</td>
                              <td id="${tid}">`+question+`</td>
                              <td>`+questionType+`</td>
                              <td>`+questionAnswer+`</td>
                              <td class="text-end">
                                  <div><button id="${mid}" value="${question}" class="btn btn-link p-0" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="질문 수정" onclick="modifyRow(this,'${questionType}')"><span class="text-500 fas fa-edit"></span></button><button id="${rid}" class="btn btn-link p-0 ms-2" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="질문 삭제" onclick="deleteRow(this)"><span class="text-500 fas fa-trash-alt"></span></button></div>
                              </td>
                          </tr>`;
                        $("#table-questions tr:last").after(markup);
                       
                        idx += 1;
                    });
                    // 질문 목록에 작성한거 지워주기
                    $('#question-content').val("");
                    $('#question-opt').val("");
                }
            });
            
            // 질문 목록에 작성한거 지워주기
            $('#question-content').val("");
            $('#question-opt').val("");
            
        };
        
  </script>
    <style>
        .rounded-circle {
          transition: transform .7s ease-in-out; /* I moved this */
        }
        .rounded-circle:hover {
          transform: translate(0) rotate(360deg); /* I changed this */
        }
        td {
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          max-width: 250px;
        }
    </style>


  </body>

</html>